(self.webpackChunklite=self.webpackChunklite||[]).push([[2405],{73004:(e,n,t)=>{"use strict";t.d(n,{Z:()=>c});var l=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var o=l.createElement("path",{d:"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z",fillRule:"evenodd"});const c=function(e){return l.createElement("svg",i({width:21,height:21,viewBox:"0 0 21 21"},e),o)}},82405:(e,n,t)=>{"use strict";t.d(n,{b3:()=>A,Iq:()=>G,MT:()=>J,Fp:()=>W});var l=t(63038),i=t.n(l),o=t(28655),c=t.n(o),r=t(71439),a=t(46829),u=t(67294),s=t(5977),d=t(77520),m=t(71230),f=t(25550),p=t(25267),b=t(67701),g=t(18733),E=t(26350),v=t(50563),w=t(77355),C=t(93310),y=t(47230),S=t(73917),_=t(53058),h=t(20113),x=t(87691),k=t(18627),I=t(66411),F=t(14646),O=t(34135),T=t(92661),B=t(43487),R=t(73004),U=t(50458),V=t(68216);function P(){var e=c()(["\n  mutation UnsubscribeCollectionEmailsMutation($id: ID!) {\n    unsubscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isSubscribedToEmails\n      }\n    }\n  }\n"]);return P=function(){return e},e}function M(){var e=c()(["\n  mutation SubscribeCollectionEmailsMutation($id: ID!) {\n    subscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isSubscribedToEmails\n      }\n    }\n  }\n"]);return M=function(){return e},e}function L(){var e=c()(["\n  mutation UnfollowCollectionMutation($id: ID!) {\n    unfollowCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isFollowing\n      }\n    }\n  }\n"]);return L=function(){return e},e}function z(){var e=c()(["\n  mutation FollowCollectionMutation($id: ID!) {\n    followCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isFollowing\n      }\n    }\n  }\n"]);return z=function(){return e},e}function D(){var e=c()(["\n  fragment CollectionFollowButton_collection on Collection {\n    __typename\n    id\n    name\n    canToggleEmail\n    slug\n    ...collectionUrl_collection\n    ...SusiClickable_collection\n  }\n  ","\n  ","\n"]);return D=function(){return e},e}function $(){var e=c()(["\n  fragment CollectionFollowButton_post on Post {\n    __typename\n    id\n  }\n"]);return $=function(){return e},e}var N="collectionFollowPopover",A=(0,r.Ps)($()),G=(0,r.Ps)(D(),V.nf,E.Os),Y="follow_card",H=function(e){var n=e.children,t=e.extraTopPadding,l=e.extraBottomPadding,i=e.padding,o=e.margin,c=e.borderTop;return u.createElement(w.x,{padding:i||"".concat(t?"20px":"5px"," 20px ").concat(l?"20px":"5px"," 20px"),margin:o,borderTop:c?"BASE_LIGHTER":"NONE"},n)},j=(0,r.Ps)(z()),X=(0,r.Ps)(L()),Z=(0,r.Ps)(M()),q=(0,r.Ps)(P()),J=function(e,n){var t=(0,a.useMutation)(X),l=i()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{unfollowCollection:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isFollowing:!1}}},update:function(e){e.modify({id:"User:".concat(n),fields:{missionControl:(0,v.im)("followedCollections",!1)}})}})}),[e])},K=function(e){return function(n){return e?{fill:n.baseColor.text.lighter,marginLeft:"2px",width:"18px",height:"auto",paddingBottom:"1px"}:{fill:"inherit",marginLeft:"6px"}}},W=function(e){var n=e.buttonSize,t=e.buttonStyleFn,l=e.collection,o=e.isPopoverVisible,c=e.isToastVisible,r=e.post,U=e.simpleButton,V=e.simpleLink,P=e.isLinkStyle,M=e.susiEntry,L=e.width,z=e.preventParentClick,D=(0,F.I)(),$=(0,B.v9)((function(e){return e.config.authDomain})),A=(0,f.r)().viewerId,G=l&&l.name?l.name:"",Y=(0,k.Av)(),X=(0,I.pK)(),W=(0,b.gY)(l).viewerEdge,ne=u.useState(!!o),te=i()(ne,2),le=te[0],ie=te[1],oe=u.useState(!!c),ce=i()(oe,2),re=ce[0],ae=ce[1],ue=function(e,n){var t=(0,a.useMutation)(j),l=i()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{followCollection:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isFollowing:!0}}},update:function(t){t.modify({id:"User:".concat(n),fields:{missionControl:(0,v.im)("followedCollections",!0),followingCollectionConnection:(0,v.Hc)(e)}})}})}),[e])}(l.id,A),se=J(l.id,A),de=function(e,n){var t=(0,a.useMutation)(Z),l=i()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{subscribeCollectionEmails:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isSubscribedToEmails:!0}}}})}),[e])}(l.id,A),me=function(e,n){var t=(0,a.useMutation)(q),l=i()(t,1)[0];return u.useCallback((function(){return l({variables:{id:e},optimisticResponse:{unsubscribeCollectionEmails:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isSubscribedToEmails:!1}}}})}),[e])}(l.id,A),fe=u.useCallback((function(){ie(!1)}),[]);u.useEffect((function(){return O.V6.on("scroll",fe),function(){O.V6.off("scroll",fe)}}),[fe]);var pe=u.useCallback((function(e){z&&e.preventDefault(),null!=W&&W.isFollowing||(Y.event("collection.followed",{collectionId:l.id,followSource:X}),ue()),ie(!0)}),[l,W,z,X]),be=u.useCallback((function(e){z&&e.preventDefault(),Y.event("collection.unfollowed",{collectionId:l.id,followSource:X}),se(),ie(!1)}),[z,X]),ge=u.useCallback((function(){ie(!1)}),[]),Ee=u.useCallback((function(e){Y.event("client.action",{action:"toggle-subscribe-collection-emails",eventType:"click",classAttribute:"checkbox"}),e.target.checked?de():me(),ae(!0)}),[]),ve=u.useCallback((function(){ae(!1)}),[]);if(U)return ee($,l,r,pe,be,n,t,W);var we=function(e){var n,t=e.children,i=e.buttonSize,o=void 0===i?"SMALL":i,c=e.buttonStyle,a=e.isPopoverVisible,m=e.linkStyle,f=void 0===m?null:m,b=(0,s.TH)(),g=(0,T.$B)(b.pathname),v=null==g||null===(n=g.route)||void 0===n?void 0:n.name;return u.createElement(p.I,null,(function(e){return e?null!=f?u.createElement(C.r,{"aria-controls":N,"aria-expanded":a?"true":"false",onClick:pe,linkStyle:f},t):u.createElement(y.z,{"aria-controls":N,"aria-expanded":a?"true":"false",size:o,onClick:pe,buttonStyle:c,width:L},t):u.createElement(E.R9,{collection:l,buttonStyle:"STRONG",buttonWidth:L,linkStyle:"OBVIOUS",isButton:!P,buttonSize:o,operation:"register",actionUrl:Q($,l,r)||"",susiEntry:M,pageSource:(0,d.x)(v,"register")},t)}))},Ce=!(null==W||!W.isSubscribedToEmails),ye=!(null==W||!W.isFollowing);return V?u.createElement(C.r,{onClick:ye?be:pe},u.createElement(w.x,{display:"flex",flexDirection:"row"},ye?"Unfollow publication":"Follow publication")):u.createElement(m.f,null,u.createElement(S.J,{ariaId:N,isVisible:!!le,hide:ge,popoverRenderFn:function(){return u.createElement(w.x,{width:"280px",display:"flex",flexDirection:"column"},u.createElement(H,{extraTopPadding:!0},u.createElement(h.X6,{scale:"XS"},"You‘re following ",G)),u.createElement(H,null,u.createElement(x.F,{scale:"M"},"You‘ll now see more stories from ",G," across Medium.")),l.canToggleEmail&&u.createElement(H,null,u.createElement(x.F,{scale:"M"},u.createElement("label",null,u.createElement(w.x,{display:"inline",marginRight:"5px"},u.createElement("input",{type:"checkbox",onChange:Ee,checked:Ce})),"Receive emails from this publication"))),u.createElement(H,{extraBottomPadding:!0},u.createElement(x.F,{scale:"M"},u.createElement(C.r,{onClick:be,linkStyle:"OBVIOUS",inline:!0},"Unfollow publication"))))}},u.createElement(we,{isPopoverVisible:!!le,buttonStyle:ye?"OBVIOUS":"STRONG",linkStyle:P?null!=W&&W.isFollowing?"SUBTLE":"OBVIOUS":null,buttonSize:n},u.createElement(w.x,{display:"flex",flexDirection:"row"},ye?"Following":"Follow",ye&&u.createElement("span",{className:D({marginBottom:P?null:"-6px",position:"relative"})},u.createElement(R.Z,{className:D(K(P))}))))),u.createElement(g.N8,null,u.createElement(_.F,{isVisible:!!re,hide:ve,duration:2e3},u.createElement(x.F,{scale:"M"},Ce?"You‘ll now receive emails from ".concat(G,"."):"You‘ll no longer receive emails from ".concat(G,".")))))},Q=function(e,n,t){return n.slug&&(t&&t.id?(0,U.TAb)(e,n.slug,t.id):(0,U.LlO)(e,n.slug))},ee=function(e,n,t,l,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"REGULAR",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){return e?"STRONG":"OBVIOUS"},r=arguments.length>7?arguments[7]:void 0,a=!(null==r||!r.isFollowing),s=c(!!a);return u.createElement(p.I,null,(function(c){return c?u.createElement(y.z,{size:o,onClick:a?i:l,buttonStyle:s},a?"Following":"Follow"):u.createElement(E.R9,{collection:n,buttonStyle:"OBVIOUS",isButton:!0,buttonSize:"REGULAR",operation:"register",actionUrl:Q(e,n,t)||"",susiEntry:Y},a?"Following":"Follow")}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2405.89e8736f.chunk.js.map