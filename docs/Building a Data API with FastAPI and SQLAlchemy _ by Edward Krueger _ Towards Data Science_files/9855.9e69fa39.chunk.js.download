(self.webpackChunklite=self.webpackChunklite||[]).push([[9855],{59855:(e,t,n)=>{"use strict";n.d(t,{f:()=>Z,N:()=>X});var r=n(63038),a=n.n(r),i=n(67294),o=n(5977),l=n(38352),u=n(77355),c=n(8431),s=function(e){var t=e.title;return i.createElement(u.x,{width:"100%",padding:"0 20px"},i.createElement(u.x,{display:"flex",justifyContent:"space-between",marginBottom:"8px"},i.createElement(c.Lh,null,t)),i.createElement(l.oK,{paddingTopBottom:"0"}))},d=n(35473),m=n(14818),p=n(93310),f=n(87691),h=n(18627),g=n(14646),y=n(78249),v=n(87498),b=n(26679),x={display:"block",textAlign:"left",width:"252px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},k={fill:"rgba(0, 0, 0, 0.54)",display:"block",marginLeft:"5px",marginRight:"6px"},I=function(e){var t=e.type,n=e.name,r=e.url,a=e.imageId,o=e.query,l=e.queryId,c=e.index,s=e.itemId,I=e.algoliaIndexName,E=e.isFocus,w=e.isLastItem,N=e.description,P=(0,h.Av)(),O=(0,g.I)(),C=(0,b.Ir)({queryId:l,indexName:I}),T=i.useRef(null),q=i.useCallback((function(e){P.event("search.predictiveResultClicked",{type:t.toLowerCase(),query:o,path:e.currentTarget.href,rank:0,total:0}),C(s,c)}),[o,t,C,s,c]),S=i.useMemo((function(){return"TAG"===t?i.createElement("div",{className:O(k)},i.createElement(y.Z,null)):"COLLECTION"===t?i.createElement(m.z,{miroId:a||"",freezeGifs:!1,alt:n||"Publication avatar",diameter:24}):"USER"===t?i.createElement(m.z,{miroId:a||v.gG,alt:n||"",diameter:24,freezeGifs:!1}):i.createElement(i.Fragment,null)}),[n,a]),D=i.useMemo((function(){return i.createElement(f.F,{color:"DARKER",scale:"M"},i.createElement("span",{className:O(x)},n))}),[n]);return i.useEffect((function(){E&&T.current&&T.current.focus()}),[E,T.current]),i.createElement(u.x,{display:"flex",tag:"li",paddingLeft:"20px",paddingRight:"12px",marginBottom:w?void 0:"12px"},i.createElement(p.r,{anchorRef:T,tabIndex:-1,linkStyle:"SUBTLE",href:r,onClick:q},i.createElement(d.Y,{avatar:S,title:D,description:N&&i.createElement(u.x,{tag:"span",textAlign:"left"},N),clampDescription:1})))},E=n(60671),w=n(75221),N=n(50458),P=n(63459),O={width:"252px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},C=function(e){var t=e.post,n=e.queryId,r=e.index,a=e.isEntityRouter,o=e.isFocus,l=(0,g.I)(),c=i.useRef(null),s=(0,N.jVf)({id:t.postId},a),d=(0,b.Ir)({queryId:n,indexName:w.uw.POST}),m=i.useCallback((function(){d(t.objectID,r)}),[d,r,t.objectID]);return i.useEffect((function(){o&&c.current&&c.current.focus()}),[o,c.current]),i.createElement(u.x,{display:"flex",tag:"li",paddingLeft:"20px",paddingRight:"12px"},i.createElement(u.x,{marginBottom:"16px"},i.createElement(p.r,{anchorRef:c,onClick:m,tabIndex:-1,linkStyle:"SUBTLE",href:s},i.createElement(f.F,{scale:"S",color:"DARKER"},i.createElement("div",{className:l(O)},t.title)),i.createElement(f.F,{scale:"S"},i.createElement(P.E,{timestamp:t.latestPublishedAt})))))};function T(e){var t=e.data,n=e.refIndex,r=e.isLastPopover,a=e.query,o=t.collections;return i.createElement(i.Fragment,null,i.createElement(s,{title:"Publications"}),i.createElement(u.x,{marginTop:"12px",marginBottom:r?void 0:"15px"},o.hits.map((function(e,t){var r=e.collectionId,l=e.objectID,u=e.imageId,c=e.name;return i.createElement(I,{isFocus:n===t,key:r,algoliaIndexName:w.uw.COLLECTION,index:t,itemId:l,queryId:o.queryId,type:"COLLECTION",name:c,imageId:u,url:(0,N.RHb)(r),query:a,isLastItem:o.hits.length-1===t})}))))}function q(e){var t=e.data,n=e.authDomain,r=e.entityType,a=e.refIndex,o=e.isLastPopover,l=e.query,c=t.tags;return i.createElement(i.Fragment,null,i.createElement(s,{title:"Tags"}),i.createElement(u.x,{marginTop:"12px",marginBottom:o?void 0:"15px"},c.hits.map((function(e,t){var o=e.displayText,u=e.objectID,s=e.tagSlug;return i.createElement(I,{isFocus:a===t,key:s,type:"TAG",algoliaIndexName:w.uw.TAG,index:t,itemId:u,queryId:c.queryId,name:o,url:(0,N.HYG)(s,n,r),query:l,isLastItem:c.hits.length-1===t})}))))}function S(e){var t=e.data,n=e.authDomain,r=e.refIndex,a=e.isLastPopover,o=e.query,l=t.users;return i.createElement(i.Fragment,null,i.createElement(s,{title:"People"}),i.createElement(u.x,{marginTop:"12px",marginBottom:a?void 0:"15px"},l.hits.map((function(e,t){var a=e.imageId,u=e.objectID,c=e.name,s=e.userId,d=e.username,m=(0,N.Qyn)(d,n);return i.createElement(I,{isFocus:r===t,key:s,type:"USER",algoliaIndexName:w.uw.USER,index:t,queryId:l.queryId,itemId:u,imageId:a,name:c,url:m,query:o,isLastItem:l.hits.length-1===t})}))))}function D(e){var t=e.data,n=e.isCollection,r=e.refIndex,a=e.entityType,o=e.isLastPopover,l=e.isCatalog,c=t.posts,d="Profile";l?d="List":n&&(d="Publication");var m="From this ".concat(d);return i.createElement(i.Fragment,null,i.createElement(s,{title:m}),i.createElement(u.x,{marginTop:"12px",marginBottom:o?void 0:"15px"},c.hits.map((function(e,t){return i.createElement(C,{key:"story-item-".concat(t),post:e,index:t,queryId:c.queryId,isEntityRouter:a!==E.Cr.DEFAULT,isFocus:r===t})}))))}function j(e){var t=e.data,n=e.authDomain,r=e.query,a=e.entityType,o=e.focusIndex,c=e.isCollection,s=e.isCatalog;if(!r)return null;var d=t.collections,m=t.tags,p=t.users,f=t.posts,h=p.hits.length>0,g=d.hits.length>0,y=m.hits.length>0,v=f.hits.length>0;return h||g||y||v?i.createElement(u.x,{width:"316px"},i.createElement(l.mX,{padding:"30px"},v&&i.createElement(D,{data:t,isCollection:c,isCatalog:s,isLastPopover:!g&&!y&&!h,refIndex:o,query:r,entityType:a}),h&&i.createElement(S,{data:t,authDomain:n,refIndex:o,isLastPopover:!g&&!y,query:r}),g&&i.createElement(T,{data:t,refIndex:null!==o?o-p.hits.length:null,isLastPopover:!y,query:r}),y&&i.createElement(q,{data:t,authDomain:n,entityType:a,refIndex:null!==o?o-p.hits.length-d.hits.length:null,isLastPopover:!0,query:r}))):null}var L=n(25735),R=n(73917),A=n(31889),F=n(43487),_=n(21638),U=n(13241),V=n(27460),B=n(66411),M=n(68894),Q=n(42140),H=function(e){return function(t){return{display:"flex",border:"1px solid ".concat(t.baseColor.border.lighter),borderRadius:"20px",width:e?"100%":"inherit"}}},K=function(e){return{boxShadow:"0px 2px 10px 0px #00000026",border:"1px solid ".concat(e.baseColor.background.normal)}},G=function(e){return{":after":{boxShadow:"-1px -1px 1px -1px #00000026",border:"1px solid ".concat(e.baseColor.background.normal)}}},z=function(e){return{border:"none",outline:"none",fontFamily:_.k2,fontSize:"14px",lineHeight:"20px",marginRight:"20px",width:"100%",padding:"8px 0 11px",backgroundColor:"transparent",color:e.baseColor.text.normal,"::placeholder":{color:e.baseColor.text.lighter}}},Y="searchResults";function X(e){var t=e.searchPlaceholder,n=e.isPopoverVisible,r=e.onQueryChange,l=e.entityType,c=e.authDomain,s=e.children,d=e.onKeyDown,m=e.watchQueryUrl,p=e.fullWidth,f=e.collectionSlug,h=e.mainSearchCategory,y=(0,g.I)(),v=(0,A.F)(),x=(0,o.TH)(),k=(0,Q.d)(x.search).q,I=i.useRef(null),E=i.useState(m?k:null),w=a()(E,2),P=w[0],O=w[1],C=(0,F.v9)((function(e){return e.navigation.hostname})),T=(0,N.gxh)({category:h,collectionSlug:f}),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.k6)(),r=(0,B.pK)();return i.useCallback((function(){var a=new URLSearchParams;if(r&&a.set("source",r),t.queryParams)for(var i in t.queryParams)a.set(i,t.queryParams[i]);var o=a.toString()?"?".concat(a.toString()):"",l={pathname:e,search:o,hash:t.hash,state:t.state};t.replace?n.replace(l):n.push(l)}),[n,e,r,t.queryParams,t.hash,t.state])}(T,{queryParams:{q:null!=P?P:""}}),S=i.useCallback((function(e){O(e.target.value),r(e.target.value)}),[r]),D=i.useCallback((function(e){"Enter"===e.key&&P&&(0,b._)(P),d?d(e):"Enter"===e.key?C===c?q():window.location.assign("https://".concat(c).concat(T,"?q=").concat(P)):"ArrowDown"===e.key&&I.current&&I.current.blur()}),[I.current,P,l,c,C,T,q,d]);return i.useEffect((function(){k&&m&&(O(k),r(k))}),[k,r,m]),i.createElement("div",{className:y(H(!!p))},s,i.createElement(u.x,{tag:"span",padding:"7px 7px 6px 8px"},i.createElement(U.Z,{fill:v.baseColor.fill.darker})),i.createElement("input",{role:"combobox","aria-controls":Y,"aria-expanded":n?"true":"false","aria-label":"search",tabIndex:0,className:y(z),placeholder:t,ref:I,value:null!=P?P:"",onChange:S,onKeyDown:D}))}function Z(e){var t=e.algoliaIndexes,n=e.algoliaQueryContext,r=e.mainSearchCategory,o=e.publisher,l=e.catalogId,u=e.hitsPerPagePerIndex,c=(0,h.Av)(),s=(0,M.O)(!1),d=a()(s,3),m=d[0],p=d[1],f=d[2],g=(0,F.v9)((function(e){return e.config.productName})),y=(0,F.v9)((function(e){return e.config.algolia})),v=(0,F.v9)((function(e){return e.config.authDomain})),b=(0,F.v9)((function(e){return e.client.routingEntity.type})),x=i.useState(null),k=a()(x,2),I=k[0],E=k[1],w=i.useState(""),N=a()(w,2),P=N[0],O=N[1],C="Collection"===(null==o?void 0:o.__typename),T="Collection"===(null==o?void 0:o.__typename)?o.slug:void 0,q=!!(0,L.VB)({name:"can_view_unfiltered_search",placeholder:!1}),S=!q,D=(0,V.xY)(n,P,t,{filterForHighQuality:S,publisher:o,catalogId:l,hitsPerPagePerIndex:u}),A=a()(D,2),_=A[0],U=A[1],B=i.useCallback((function(e){O(e),e||f(),E(null),m||(p(),c.event("search.predictiveOpened",{})),c.event("search.predictiveQueried",{query:e})}),[q,f,p,y,P]),Q=i.useCallback((function(){return i.createElement(j,{productName:g,entityType:b,authDomain:v,query:P,data:_,focusIndex:I,isCollection:C,isCatalog:!!l})}),[g,b,v,P,_,I,C]);return i.useEffect((function(){if(m){var e=function(e){var t="ArrowUp"===e.key,n="ArrowDown"===e.key;if(t||n){e.preventDefault();var r=U-1;if(null===I&&n)E(0);else if(null!==I){var a=(I+(n?1:-1))%U;E(a<0?r:a)}}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[I,m,U]),i.createElement(X,{authDomain:v,entityType:b,isPopoverVisible:U>0&&m,searchPlaceholder:"Search",onQueryChange:B,collectionSlug:T,mainSearchCategory:r},i.createElement(R.J,{ariaId:Y,isVisible:U>0&&m,hide:f,arrowPadding:{left:32},popoverRenderFn:Q,setMaxHeight:!0,popoverRules:K,arrowRules:G,placement:"bottom-start"},i.createElement(i.Fragment,null)))}},27460:(e,t,n)=>{"use strict";n.d(t,{tp:()=>v,xY:()=>O});var r,a=n(59713),i=n.n(a),o=n(12297),l=n.n(o),u=n(94301),c=n.n(u),s=n(67294),d=n(12291),m=n(6443),p=n(86994),f=n(3184),h=n(43487);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.User=1]="User",e[e.Author=2]="Author"}(r||(r={}));var v={numericFilters:"peopleType!=".concat(r.Author)},b={collection:"collections",post:"posts",user:"users",tag:"tags"},x="/1/indexes/*/queries",k="user",I="collection",E="post",w="numericFilters";function N(e,t){return"".concat(e,"-").concat(t)}var P={collections:{hits:[]},posts:{hits:[]},users:{hits:[]},tags:{hits:[]}};function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=s.useRef(""),i=r.filterForHighQuality,o=r.filters,u=r.publisher,g=r.catalogId,O=r.hitsPerPagePerIndex,C=(null==u?void 0:u.id)||null,T=(0,m.H)(),q=T.value,S=T.loading,D=(0,p.c)(),j=D.loading,L=D.isBot,R=S||j,A=(0,d.I0)(),F=(0,h.v9)((function(e){return e.config.algolia})),_=(0,h.v9)((function(e){var n;return null===(n=e.algolia.queries[t])||void 0===n?void 0:n.status})),U="https://".concat(F.appId).concat(F.host).concat(x),V=N(e,t),B=N(e,a.current),M=(0,h.b$)((function(e){var t;return null===(t=e.algolia.queries[B])||void 0===t?void 0:t.data})),Q=(0,h.b$)((function(e){var t;return null===(t=e.algolia.queries[V])||void 0===t?void 0:t.data})),H=Q||M||P;s.useEffect((function(){Q&&(a.current=t)}),[t,Q,a.current]);var K=s.useMemo((function(){return l()(Object.values(H).map((function(e){return e.hits.length})))}),[H]),G=["web","inline"],z=s.useMemo((function(){var e=n.map((function(e){var n=e===E&&g,r=y({query:t,hitsPerPage:O&&O[e]||3,numericFilters:"",clickAnalytics:!R&&!L,analyticsTags:n?G.concat(["list"]):G},o);return e===E&&(g?r.filters="_tags:'list_".concat(g,"'"):C&&(r.facetFilters="Collection"===(null==u?void 0:u.__typename)?"collectionId:".concat(C):"authorId:".concat(C))),"tag"===e?r[w]="postCount>=1":e===k&&i?r.filters="highQualityUser:true":e===I&&i?r.filters="isHighQualityCollection:true":e===E&&(r.attributesToRetrieve="title,postId,latestPublishedAt"),e===k&&(r[w]=v.numericFilters),{indexName:F.indexPrefix+e,params:Object.keys(r).map((function(e){return e+"="+r[e]})).join("&")}}));return JSON.stringify({requests:e})}),[F,R,L,t,q,i,o]),Y=s.useCallback((function(e){var t=e.results,r={users:{hits:[]},collections:{hits:[]},tags:{hits:[]},posts:{hits:[]}};return n.forEach((function(e,n){var a,i;r[b[e]]={hits:(null===(a=t[n])||void 0===a?void 0:a.hits)||[],queryId:null===(i=t[n])||void 0===i?void 0:i.queryID}})),r}),[n]);return s.useEffect((function(){if(t&&!R&&"loading"!==_&&"error"!==_&&"success"!==_){var e={"X-Algolia-API-Key":F.apiKeySearch,"X-Algolia-Application-Id":F.appId};q&&(e["X-Algolia-UserToken"]=q.id),A((0,f.Zl)(V)),c()(U,{method:"POST",headers:e,body:z}).then((function(e){return e.json()})).then((function(e){e.status>=400?A((0,f.TT)(V)):A((0,f.Yy)(V,Y(e)))})).catch((function(){A((0,f.TT)(V))}))}}),[U,F,z,q,R,t,_,Y,V]),[H,K]}},26679:(e,t,n)=>{"use strict";n.d(t,{_:()=>O,KM:()=>P,DL:()=>C,Bm:()=>q,IB:()=>b,_u:()=>T,Ir:()=>N,VR:()=>w});var r=n(319),a=n.n(r),i=n(63038),o=n.n(i),l=n(59713),u=n.n(l),c=n(46829),s=n(67294),d=n(36405),m=n(75221),p=n(78285),f=n(28959),h=n(27460),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SearchClickEventMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"queryId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"indexName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AlgoliaIndexName"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"positions"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchClickEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"queryId"},value:{kind:"Variable",name:{kind:"Name",value:"queryId"}}},{kind:"Argument",name:{kind:"Name",value:"indexName"},value:{kind:"Variable",name:{kind:"Name",value:"indexName"}}},{kind:"Argument",name:{kind:"Name",value:"objectIds"},value:{kind:"Variable",name:{kind:"Name",value:"objectIds"}}},{kind:"Argument",name:{kind:"Name",value:"positions"},value:{kind:"Variable",name:{kind:"Name",value:"positions"}}}]}]}}]};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={users:"search_user",posts:"search_post",tags:"search_tag",publications:"search_publication",none:"search_post"},x={filters:"highQualityUser:true OR writtenByHighQulityUser:true"},k={filters:"writtenByHighQualityUser:true"},I=new f.Z("recent_searches"),E="queries";function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isRecommendations,n=!!(0,d.P5)("can_view_unfiltered_search"),r=!n,a=s.useMemo((function(){var e=["web"];return t&&e.push("recommendations"),{clickAnalytics:!0,analyticsTags:e}}),[t]),i=s.useMemo((function(){return v(v({},r?x:{}),h.tp)}),[r]),o=s.useMemo((function(){return r?k:{}}),[r]);return s.useMemo((function(){var e;return e={},u()(e,m.uw.COLLECTION,a),u()(e,m.uw.POST,v(v({},o),a)),u()(e,m.uw.USER,v(v({},i),a)),u()(e,m.uw.TAG,v({numericFilters:"postCount>=1"},a)),u()(e,m.uw.BOOK_EDITION,{}),e}),[a,o,i])}function N(e){var t=e.queryId,n=e.indexName,r=(0,c.useMutation)(g),a=o()(r,1)[0];return s.useCallback((function(e,r){t&&e&&a({variables:{queryId:t,indexName:n,positions:[r+1],objectIds:[e]}})}),[a,t,n])}function P(){return I.get(E)||[]}function O(e){var t=P();if(e){var n=[e].concat(a()(t.filter((function(t){return t!==e}))));I.set(E,n.slice(0,10))}}function C(e){var t=P();I.set(E,t.filter((function(t){return e!==t})))}function T(e,t,n){var r=new URLSearchParams(t.location.search);e?r.set("q",e):r.delete("q");var a=r.toString();n((0,p.kO)(a)),t.push({search:a})}function q(e){var t=e.split("/"),n=t.indexOf("search"),r=n>-1?t[n+1]:null;return r?["users","tags","posts","publications"].includes(r)?r:null:"none"}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/9855.9e69fa39.chunk.js.map